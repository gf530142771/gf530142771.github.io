## preloadScene  
1. 预加载PreloadScene所需脚本  
2. 初始化基本数据
3. 初始化语言
4. 初始化ad  通过jsb 调用 安卓或者ios平台相关 jsb.MetaInfoMgr  
5. 检查热更新 ScriptDownloader  
6. 登录流程loadLayer负责显示。

**其他preload目录中文件的作用 preload一般不再轻易改动**

* Downloader.js  
用来处理游戏内按模块下载的内容.
比如运营活动/促销等单独的模块.

* DownloaderManager.js  
用来和C++层同信，主要是管理下载状态的。
用于下载文件和下载状态的监听

* JSObject.js 自己补的一些通用函数  
JS一些基础类(String Math Obejct)等的一些扩展。

* ModuleDownloader.js   
管理模块下载的顺序等，具体使用看代码
目前是在HomeScene中使用
与Downloader搭配使用管理模块的下载队列

* MsgCenterMgr.js   
自己写的js层面的通知类，比cocos提供的监听类使用简单，效率更快。
通过一个{}来管理
注册监听：key 和 handler
删除监听: key
通知: cmd 命令即函数名称 data 函数的参数 通过检查handler是否实现了该函数起到通知的作用。

* MustDownloader.js   
暂时不需关注，没有使用

* ParseManifest.js   
解析下载模块的manifest文件，用于增量更新，在Downloader.js中被使用。

* ScriptDownloader.js   
脚本下载文件，用于脚本和必下资源下载
使用的是cocos2d-x的自带热更检查

* UpdateFailLayer.js   
下载脚本和必下资源失败，点击按钮重新下载脚本和必下资源。

* GlobalFlag.js   
一些全局配置文件

* LanguageMgr.js  
多语言管理文件，用于显示界面上的不同语言，根据语言的切换，切换不同的配置文件。  
相关配置文件在**must_download_res**文件夹下

* PluginLog.js   
打log到要求平台的封装文件，具体使用看代码  
打点功能也在此类里处理

* PreloadResponse.js   
用于监听网络状态  
需要用到网络的地方使用此值**g_isOnline**获取网络状态。

* ReloadModule  
用于加载需要更新脚本后加载的文件  
加载的是_init.js文件
详见[模块管理](#模块管理)


## 模块管理
每一个大目录下都要有一个_init.js脚本，用于加载目录下的所有脚本。  
ReloadModule.js脚本中的方法负责加载所有的_init.js文件。  
**_init.js范例**
```js
require("play/ctrl/CardGenerator.js")
require("play/ctrl/CardManager.js")
require("play/ctrl/ChallengeSeqMgr.js")
require("play/ctrl/ChallengeStarMgr.js");
require("play/ctrl/GameController.js")
require("play/ctrl/GameDataManager.js")
require("play/ctrl/HistoryRecorder.js")
require("play/ctrl/NPCDecision.js")
require("play/ctrl/SkillCardManager.js")
require("play/ctrl/SkillLevelManager.js")
require("play/ctrl/SupplyManager.js")
require("play/ctrl/UserActionLogger.js")
require("play/ctrl/ComboDataMgr.js")
require("play/ctrl/SkillOutCardsMgr.js");
```
